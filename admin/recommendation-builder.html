<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pyrus Admin - Recommendations Builder</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Admin Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <img src="../images/pyrus-logo-icon.png" alt="Pyrus" width="28" height="28" style="filter: brightness(0) invert(1);">
                <span>Pyrus Admin</span>
            </div>
            <nav class="admin-nav">
                <a href="recommendations.html" class="admin-nav-item active">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                        <polyline points="2 17 12 22 22 17"></polyline>
                        <polyline points="2 12 12 17 22 12"></polyline>
                    </svg>
                    <span>Recommendations</span>
                </a>
                <a href="index.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>Clients</span>
                </a>
                <a href="content.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    <span>Content</span>
                </a>
                <a href="users.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span>Users</span>
                </a>
                <a href="revenue.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"></line>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                    </svg>
                    <span>Revenue / MRR</span>
                </a>
                <a href="notifications.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span>Notifications</span>
                </a>
                <a href="settings.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                    <span>Settings</span>
                </a>
                <div class="nav-spacer"></div>
                <a href="../client/login.html" class="admin-nav-item nav-logout" onclick="sessionStorage.clear();">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    <span>Logout</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Top Header Bar -->
            <div class="admin-top-header">
                <div class="admin-top-header-left">
                    <nav class="breadcrumb">
                        <a href="../client/recommendations.html">Recommendations</a>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        <span>TC Clinical Services</span>
                    </nav>
                </div>
                <div class="admin-top-header-right">
                    <a href="notifications.html" class="btn-icon has-notification">
                        <span class="notification-badge"></span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </a>
                    <a href="settings.html" class="user-menu-link">
                        <div class="user-avatar-small">
                            <span>RK</span>
                        </div>
                        <span class="user-name">Ryan Kelly</span>
                    </a>
                </div>
            </div>

            <div class="rec-builder-layout">
                <!-- Services Sidebar -->
                <aside class="services-sidebar">
                    <!-- Root Services -->
                    <div class="service-category service-category-root expanded">
                        <button class="service-category-header">
                            <span>Root Services</span>
                            <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                        </button>
                        <div class="service-category-items">
                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="899" data-category="root" data-detail-content="business-branding-foundation">
                                <div class="service-item-header">
                                    <span class="service-item-title">Business Branding Foundation</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo) - ($899 onetime)</div>
                                <p class="service-item-desc">Establish a professional brand identity that helps customers remember, trust, and choose your business.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="249" data-onetime="0" data-category="root">
                                <div class="service-item-header">
                                    <span class="service-item-title">Seed Site</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($249/mo)</div>
                                <p class="service-item-desc">A fast, affordable website solution powered by AI technology to get your business online quickly.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="300" data-onetime="3000" data-category="root">
                                <div class="service-item-header">
                                    <span class="service-item-title">Sprout Site</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($300/mo) - ($3,000 onetime)</div>
                                <p class="service-item-desc">A professional starter WordPress website to establish your digital presence.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="450" data-onetime="4500" data-category="root">
                                <div class="service-item-header">
                                    <span class="service-item-title">Bloom Site</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($450/mo) - ($4,500 onetime)</div>
                                <p class="service-item-desc">A complete business website with enhanced features and expanded content areas.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="600" data-onetime="6000" data-category="root">
                                <div class="service-item-header">
                                    <span class="service-item-title">Harvest Site</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($600/mo) - ($6,000 onetime)</div>
                                <p class="service-item-desc">A comprehensive digital platform with advanced functionality and custom features.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="49" data-onetime="0" data-category="root">
                                <div class="service-item-header">
                                    <span class="service-item-title">WordPress Care Plan</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($49/mo)</div>
                                <p class="service-item-desc">Secure, updated hosting for WordPress sites.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="149" data-onetime="0" data-category="root">
                                <div class="service-item-header">
                                    <span class="service-item-title">Website Care Plan</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($149/mo)</div>
                                <p class="service-item-desc">Keep your website healthy and thriving. We handle all of your website updates for you.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="0" data-category="root">
                                <div class="service-item-header">
                                    <span class="service-item-title">Analytics Tracking</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo)</div>
                                <p class="service-item-desc">GA4 setup and marketing performance dashboards.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Growth Services -->
                    <div class="service-category service-category-growth expanded">
                        <button class="service-category-header">
                            <span>Growth Services</span>
                            <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                        </button>
                        <div class="service-category-items">
                            <div class="service-item" draggable="true" data-monthly="300" data-onetime="3000" data-category="growth" data-detail-content="ai-visibility-foundation">
                                <div class="service-item-header">
                                    <span class="service-item-title">AI Visibility Foundation</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($300/mo) - ($3,000 onetime)</div>
                                <p class="service-item-desc">Help AI assistants find and recommend your business.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="299" data-onetime="0" data-category="growth">
                                <div class="service-item-header">
                                    <span class="service-item-title">AI Visibility Monitoring</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($299/mo)</div>
                                <p class="service-item-desc">Track how AI platforms find and recommend you—with monthly reports and competitive intelligence.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="199" data-onetime="0" data-category="growth" data-has-quantity="true">
                                <div class="service-item-header">
                                    <span class="service-item-title">Google Business Profile Optimization</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($199/mo)</div>
                                <p class="service-item-desc">Local search visibility and profile management.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="599" data-onetime="0" data-category="growth">
                                <div class="service-item-header">
                                    <span class="service-item-title">Seedling SEO Plan</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($599/mo)</div>
                                <p class="service-item-desc">Foundational on-page SEO & performance tracking.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="1799" data-onetime="0" data-category="growth">
                                <div class="service-item-header">
                                    <span class="service-item-title">Harvest SEO Plan</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($1,799/mo)</div>
                                <p class="service-item-desc">Advanced SEO with content, link building & authority signals.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="0" data-category="growth" data-has-quantity="true">
                                <div class="service-item-header">
                                    <span class="service-item-title">Content Writing</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo)</div>
                                <p class="service-item-desc">Monthly 1,000-word SEO-optimized article.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="699" data-onetime="0" data-category="growth">
                                <div class="service-item-header">
                                    <span class="service-item-title">Organic Social Media</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($699/mo)</div>
                                <p class="service-item-desc">Consistent, engaging content across your social platforms that builds authentic connections with your audience.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="699" data-onetime="0" data-category="growth">
                                <div class="service-item-header">
                                    <span class="service-item-title">Paid Social Media</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($699/mo)</div>
                                <p class="service-item-desc">Strategic paid campaigns that put your business in front of ready-to-buy customers across multiple platforms.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="999" data-onetime="0" data-category="growth">
                                <div class="service-item-header">
                                    <span class="service-item-title">Complete Social Media</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($999/mo)</div>
                                <p class="service-item-desc">The complete package—organic content builds your reputation while paid campaigns drive immediate results.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="298" data-onetime="0" data-category="growth">
                                <div class="service-item-header">
                                    <span class="service-item-title">AI Creative Assets</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($298/mo)</div>
                                <p class="service-item-desc">Custom AI-generated images, short-form videos, and premium stock photography to elevate your social content with eye-catching visuals.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="599" data-onetime="0" data-category="growth">
                                <div class="service-item-header">
                                    <span class="service-item-title">Google Search Ads</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($599/mo)</div>
                                <p class="service-item-desc">Targeted text ads on Google Search.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="149" data-onetime="0" data-category="growth">
                                <div class="service-item-header">
                                    <span class="service-item-title">Google Local Service Ads</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($149/mo)</div>
                                <p class="service-item-desc">Pay-per-lead ads with Google Guaranteed badge.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Cultivation Tools -->
                    <div class="service-category service-category-cultivation expanded">
                        <button class="service-category-header">
                            <span>Cultivation Tools</span>
                            <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                        </button>
                        <div class="service-category-items">
                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="0" data-category="cultivation">
                                <div class="service-item-header">
                                    <span class="service-item-title">CRM & Lead Tracking</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo)</div>
                                <p class="service-item-desc">Mobile-friendly system to track and convert leads.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="0" data-category="cultivation">
                                <div class="service-item-header">
                                    <span class="service-item-title">Appointment Setting</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo)</div>
                                <p class="service-item-desc">Booking calendar with calendar integrations.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="0" data-category="cultivation">
                                <div class="service-item-header">
                                    <span class="service-item-title">Email & SMS Reminders</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo)</div>
                                <p class="service-item-desc">Automated customer communication.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="0" data-category="cultivation">
                                <div class="service-item-header">
                                    <span class="service-item-title">Web Chat</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo)</div>
                                <p class="service-item-desc">Lead capture from website directly to your phone.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="0" data-category="cultivation">
                                <div class="service-item-header">
                                    <span class="service-item-title">Conversational AI Chat</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo)</div>
                                <p class="service-item-desc">Smart chatbot trained on your business content.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="0" data-category="cultivation">
                                <div class="service-item-header">
                                    <span class="service-item-title">Review Management</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo)</div>
                                <p class="service-item-desc">Automated collection and response for Google/Facebook reviews.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Bundled Packages -->
                    <div class="service-category service-category-bundle expanded">
                        <button class="service-category-header">
                            <span>Bundled Packages</span>
                            <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                        </button>
                        <div class="service-category-items">
                            <div class="service-item" draggable="true" data-monthly="999" data-onetime="0" data-category="bundle">
                                <div class="service-item-header">
                                    <span class="service-item-title">Harvest Plan</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($999/mo)</div>
                                <p class="service-item-desc">All Grow features + Harvest SEO + Google Search Ads.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="499" data-onetime="0" data-category="bundle">
                                <div class="service-item-header">
                                    <span class="service-item-title">Grow Plan</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($499/mo)</div>
                                <p class="service-item-desc">All Seed features + Seedling SEO.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="249" data-onetime="0" data-category="bundle">
                                <div class="service-item-header">
                                    <span class="service-item-title">Seed Plan</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($249/mo)</div>
                                <p class="service-item-desc">Google Business Profile Optimization, Google Local Service Ads, Analytics Tracking, CRM + Lead Tracking.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Fertilizer Add-Ons -->
                    <div class="service-category service-category-fertilizer expanded">
                        <button class="service-category-header">
                            <span>Fertilizer Add-Ons</span>
                            <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                        </button>
                        <p class="service-category-desc">Curated bundles of engagement tools to boost lead conversion and customer communication.</p>
                        <div class="service-category-items">
                            <div class="service-item" draggable="true" data-monthly="99" data-onetime="0" data-category="fertilizer">
                                <div class="service-item-header">
                                    <span class="service-item-title">Nitrogen</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($99/mo)</div>
                                <p class="service-item-desc">Appointment Setting + Web Chat.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="199" data-onetime="0" data-category="fertilizer">
                                <div class="service-item-header">
                                    <span class="service-item-title">Phosphorous</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($199/mo)</div>
                                <p class="service-item-desc">Adds Email & SMS Reminders.</p>
                            </div>

                            <div class="service-item" draggable="true" data-monthly="499" data-onetime="0" data-category="fertilizer">
                                <div class="service-item-header">
                                    <span class="service-item-title">Potassium</span>
                                    <button class="info-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="service-item-price">($499/mo)</div>
                                <p class="service-item-desc">Adds AI Chat + Review Management.</p>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Builder Main Area -->
                <div class="rec-builder-main">
                    <!-- Client Selector -->
                    <div class="client-selector-bar">
                        <button class="btn btn-secondary add-client-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="8.5" cy="7" r="4"></circle>
                                <line x1="20" y1="8" x2="20" y2="14"></line>
                                <line x1="23" y1="11" x2="17" y2="11"></line>
                            </svg>
                            Add Client
                        </button>
                        <div class="client-dropdown-wrapper">
                            <label>Prepared For Client</label>
                            <select class="client-dropdown">
                                <option>Select Client</option>
                                <option>TC Clinical Services</option>
                                <option>Raptor Vending</option>
                                <option>Raptor Services</option>
                                <option>Gohfr</option>
                                <option>Espronceda Law</option>
                                <option>American Fence & Deck</option>
                            </select>
                        </div>
                        <button class="btn btn-primary save-plan-btn">Save Plan</button>
                    </div>

                    <!-- Good / Better / Best Columns -->
                    <div class="pricing-tiers">
                        <!-- Good Column -->
                        <div class="pricing-tier" data-tier="good">
                            <h2 class="tier-title">Good</h2>
                            <div class="tier-dropzone" data-tier="good">
                                <div class="dropzone-placeholder">
                                    <span>Drag drop service here</span>
                                </div>
                            </div>
                            <div class="tier-pricing">
                                <div class="price-row monthly-row">
                                    <span class="price-amount">$0</span>
                                    <span class="price-label">/month</span>
                                </div>
                                <div class="price-row onetime-row">
                                    <span class="price-amount">$0</span>
                                    <span class="price-label">onetime</span>
                                </div>
                                <div class="price-total">
                                    <span class="total-text">$0/mo Total</span>
                                </div>
                                <div class="price-row discount-row" style="display: none;">
                                    <span class="discount-text"></span>
                                </div>
                                <div class="claim-hints"></div>
                            </div>
                            <div class="growth-rewards" data-tier="good">
                                <div class="rewards-header">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="20 12 20 22 4 22 4 12"></polyline>
                                        <rect x="2" y="7" width="20" height="5"></rect>
                                        <line x1="12" y1="22" x2="12" y2="7"></line>
                                        <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path>
                                        <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>
                                    </svg>
                                    Your Growth Rewards
                                </div>
                                <div class="rewards-unlocked"></div>
                                <div class="rewards-coupon"></div>
                                <div class="rewards-locked"></div>
                                <div class="rewards-savings"></div>
                            </div>
                            <button class="btn btn-purchase">Purchase Now</button>
                        </div>

                        <!-- Better Column -->
                        <div class="pricing-tier" data-tier="better">
                            <h2 class="tier-title">Better</h2>
                            <div class="tier-dropzone" data-tier="better">
                                <div class="dropzone-placeholder">
                                    <span>Drag drop service here</span>
                                </div>
                            </div>
                            <div class="tier-pricing">
                                <div class="price-row monthly-row">
                                    <span class="price-amount">$0</span>
                                    <span class="price-label">/month</span>
                                </div>
                                <div class="price-row onetime-row">
                                    <span class="price-amount">$0</span>
                                    <span class="price-label">onetime</span>
                                </div>
                                <div class="price-total">
                                    <span class="total-text">$0/mo Total</span>
                                </div>
                                <div class="price-row discount-row" style="display: none;">
                                    <span class="discount-text"></span>
                                </div>
                                <div class="claim-hints"></div>
                            </div>
                            <div class="growth-rewards" data-tier="better">
                                <div class="rewards-header">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="20 12 20 22 4 22 4 12"></polyline>
                                        <rect x="2" y="7" width="20" height="5"></rect>
                                        <line x1="12" y1="22" x2="12" y2="7"></line>
                                        <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path>
                                        <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>
                                    </svg>
                                    Your Growth Rewards
                                </div>
                                <div class="rewards-unlocked"></div>
                                <div class="rewards-coupon"></div>
                                <div class="rewards-locked"></div>
                                <div class="rewards-savings"></div>
                            </div>
                            <button class="btn btn-purchase">Purchase Now</button>
                        </div>

                        <!-- Best Column -->
                        <div class="pricing-tier" data-tier="best">
                            <h2 class="tier-title">Best</h2>
                            <div class="tier-dropzone" data-tier="best">
                                <div class="dropzone-placeholder">
                                    <span>Drag drop service here</span>
                                </div>
                            </div>
                            <div class="tier-pricing">
                                <div class="price-row monthly-row">
                                    <span class="price-amount">$0</span>
                                    <span class="price-label">/month</span>
                                </div>
                                <div class="price-row onetime-row">
                                    <span class="price-amount">$0</span>
                                    <span class="price-label">onetime</span>
                                </div>
                                <div class="price-total">
                                    <span class="total-text">$0/mo Total</span>
                                </div>
                                <div class="price-row discount-row" style="display: none;">
                                    <span class="discount-text"></span>
                                </div>
                                <div class="claim-hints"></div>
                            </div>
                            <div class="growth-rewards" data-tier="best">
                                <div class="rewards-header">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="20 12 20 22 4 22 4 12"></polyline>
                                        <rect x="2" y="7" width="20" height="5"></rect>
                                        <line x1="12" y1="22" x2="12" y2="7"></line>
                                        <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path>
                                        <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>
                                    </svg>
                                    Your Growth Rewards
                                </div>
                                <div class="rewards-unlocked"></div>
                                <div class="rewards-coupon"></div>
                                <div class="rewards-locked"></div>
                                <div class="rewards-savings"></div>
                            </div>
                            <button class="btn btn-purchase">Purchase Now</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Service Info Modal -->
    <div class="modal-overlay" id="serviceInfoModal">
        <div class="modal" id="serviceModal">
            <div class="modal-header">
                <h2 class="modal-title" id="serviceModalTitle">Service Name</h2>
                <button class="modal-close" onclick="closeServiceModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body" id="serviceModalBody">
                <div class="service-modal-pricing" id="serviceModalPricing">
                    <div class="service-modal-price monthly">
                        <span class="price-value">$99</span>
                        <span class="price-period">/month</span>
                    </div>
                    <span class="price-divider">or</span>
                    <div class="service-modal-price onetime">
                        <span class="price-value">$899</span>
                        <span class="price-period">one-time</span>
                    </div>
                </div>
                <div class="service-modal-description" id="serviceModalDescription">
                    <p>Service description goes here...</p>
                </div>
                <div class="service-modal-features" id="serviceModalFeatures">
                    <h4>What's Included:</h4>
                    <ul>
                        <li>Feature 1</li>
                        <li>Feature 2</li>
                        <li>Feature 3</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeServiceModal()">Close</button>
            </div>
        </div>
    </div>

    <script src="../js/scripts.js"></script>
    <script>
        // Service Category Toggle
        document.querySelectorAll('.service-category-header').forEach(header => {
            header.addEventListener('click', () => {
                const category = header.closest('.service-category');
                category.classList.toggle('expanded');
            });
        });

        // Growth Rewards Tier Configuration
        const REWARD_TIERS = [
            { threshold: 0, freeProducts: ['Free Analytics Tracking ($99 Value)'], discount: 0, coupon: null },
            { threshold: 1000, freeProducts: ['Free Analytics Tracking ($99 Value)'], discount: 5, coupon: 'HARVEST5X' },
            { threshold: 1500, freeProducts: ['Free Analytics Tracking ($99 Value)', 'Another Free $99 Product'], discount: 5, coupon: 'HARVEST5X' },
            { threshold: 2000, freeProducts: ['Free Analytics Tracking ($99 Value)', 'Another Free $99 Product'], discount: 10, coupon: 'CULTIVATE10' }
        ];

        // Get current reward tier based on monthly total
        function getRewardTier(monthlyTotal) {
            let currentTier = 0;
            for (let i = REWARD_TIERS.length - 1; i >= 0; i--) {
                if (monthlyTotal >= REWARD_TIERS[i].threshold) {
                    currentTier = i;
                    break;
                }
            }
            return currentTier;
        }

        // Calculate and update Growth Rewards display
        function updateGrowthRewards(tier, monthlyTotal, has99ProductInCart = false) {
            const rewardsSection = document.querySelector(`.growth-rewards[data-tier="${tier}"]`);
            const unlockedDiv = rewardsSection.querySelector('.rewards-unlocked');
            const couponDiv = rewardsSection.querySelector('.rewards-coupon');
            const lockedDiv = rewardsSection.querySelector('.rewards-locked');
            const savingsDiv = rewardsSection.querySelector('.rewards-savings');

            const currentTierIndex = getRewardTier(monthlyTotal);
            const currentTier = REWARD_TIERS[currentTierIndex];
            const hasFree99Reward = currentTierIndex >= 2;

            // Build unlocked rewards in consistent order:
            // 1. Free Analytics Tracking
            // 2. Discount (if any)
            // 3. Another Free $99 Product (if unlocked)
            let unlockedHtml = '';

            // Always show Analytics Tracking first
            unlockedHtml += `<div class="reward-item unlocked">Free Analytics Tracking ($99 Value)</div>`;

            // Show discount second (if any)
            if (currentTier.discount > 0) {
                unlockedHtml += `<div class="reward-item unlocked">${currentTier.discount}% off your plan</div>`;
            }

            // Show another free $99 product third (if unlocked at tier 2+)
            if (hasFree99Reward) {
                if (has99ProductInCart) {
                    unlockedHtml += `<div class="reward-item unlocked">Another Free $99 Product</div>`;
                } else {
                    unlockedHtml += `<div class="reward-item unlocked pending">Another Free $99 Product <span class="claim-hint">(not claimed)</span></div>`;
                }
            }

            unlockedDiv.innerHTML = unlockedHtml;

            // Build coupon code display
            if (currentTier.coupon) {
                couponDiv.innerHTML = `<div class="coupon-box"><span class="coupon-label">Use Code at Checkout</span><span class="coupon-code">${currentTier.coupon}</span></div>`;
                couponDiv.style.display = '';
            } else {
                couponDiv.innerHTML = '';
                couponDiv.style.display = 'none';
            }

            // SVG icons
            const lockIcon = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>`;
            const starIcon = `<svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>`;

            // Build locked rewards (next tiers)
            let lockedHtml = '';
            if (currentTierIndex >= REWARD_TIERS.length - 1) {
                // Max tier reached
                lockedHtml = `<div class="max-rewards">${starIcon} Maximum Rewards Unlocked! ${starIcon}</div>`;
            } else {
                // Show upcoming rewards in order
                if (currentTierIndex < 1) {
                    // Not yet at $1000 - show 5% discount unlock
                    const amountNeeded = 1000 - monthlyTotal;
                    lockedHtml += `<div class="reward-item locked">${lockIcon} Add <strong>$${amountNeeded.toLocaleString()}</strong> to unlock 5% off your total cart!</div>`;
                }
                if (currentTierIndex < 2) {
                    // Not yet at $1500 - show free $99 product unlock
                    const amountNeeded = 1500 - monthlyTotal;
                    lockedHtml += `<div class="reward-item locked">${lockIcon} Add <strong>$${amountNeeded.toLocaleString()}</strong> to unlock another Free $99 Product!</div>`;
                }
                if (currentTierIndex < 3) {
                    // Not yet at $2000 - show 10% discount unlock
                    const amountNeeded = 2000 - monthlyTotal;
                    lockedHtml += `<div class="reward-item locked">${lockIcon} Add <strong>$${amountNeeded.toLocaleString()}</strong> to unlock 10% off your total cart!</div>`;
                }
            }
            lockedDiv.innerHTML = lockedHtml;

            // Calculate and show savings with detailed breakdown
            let savingsParts = [];
            let totalSavings = 0;

            // Free Analytics Tracking ($99)
            savingsParts.push('$99');
            totalSavings += 99;

            // Another free $99 product (only if claimed)
            if (hasFree99Reward && has99ProductInCart) {
                savingsParts.push('$99');
                totalSavings += 99;
            }

            // Discount savings
            if (currentTier.discount > 0) {
                const discountSavings = Math.round(monthlyTotal * (currentTier.discount / 100) * 100) / 100;
                savingsParts.push(`$${discountSavings.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}(${currentTier.discount}%)`);
                totalSavings += discountSavings;
            }

            // Format total
            const totalFormatted = totalSavings.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});

            // Build savings display
            if (savingsParts.length > 1) {
                savingsDiv.innerHTML = `<div class="savings-callout">You save: ${savingsParts.join(' + ')} = <strong>$${totalFormatted}</strong></div>`;
            } else {
                savingsDiv.innerHTML = `<div class="savings-callout">You save: <strong>$${totalFormatted}</strong></div>`;
            }
        }

        // Calculate and update tier pricing
        function updateTierPricing(tier) {
            const tierElement = document.querySelector(`.pricing-tier[data-tier="${tier}"]`);
            const dropzone = tierElement.querySelector('.tier-dropzone');
            const items = dropzone.querySelectorAll('.service-item');

            let totalMonthly = 0;
            let totalOnetime = 0;

            // First pass: calculate total without Analytics to determine reward tier
            let baseTotalMonthly = 0;
            items.forEach(item => {
                const title = item.querySelector('.service-item-title')?.textContent || '';
                const isAnalyticsTracking = title.includes('Analytics Tracking');
                if (isAnalyticsTracking) return; // Skip analytics for base calculation (always free)

                const monthly = parseInt(item.getAttribute('data-monthly')) || 0;
                const quantity = parseInt(item.getAttribute('data-quantity')) || 1;
                const pricingSelector = item.querySelector('.pricing-selector');
                if (pricingSelector) {
                    const selectedOption = pricingSelector.querySelector('input:checked');
                    if (!selectedOption || selectedOption.value !== 'onetime') {
                        baseTotalMonthly += monthly * quantity;
                    }
                } else {
                    baseTotalMonthly += monthly * quantity;
                }
            });

            // Determine reward tier based on non-free items
            const rewardTierIndex = getRewardTier(baseTotalMonthly);
            const analyticsIsFree = rewardTierIndex >= 0; // Analytics is free at all tiers
            const free99Count = rewardTierIndex >= 2 ? 1 : 0; // One free $99 product at tier 2+

            // Track how many free $99 slots we've used (other than Analytics)
            let free99Used = 0;

            items.forEach(item => {
                const title = item.querySelector('.service-item-title')?.textContent || '';
                const isAnalyticsTracking = title.includes('Analytics Tracking');
                const monthly = parseInt(item.getAttribute('data-monthly')) || 0;
                const onetime = parseInt(item.getAttribute('data-onetime')) || 0;
                const quantity = parseInt(item.getAttribute('data-quantity')) || 1;
                const priceDisplay = item.querySelector('.service-item-price');

                // Store original price if not already stored
                if (priceDisplay && !item.getAttribute('data-original-price')) {
                    item.setAttribute('data-original-price', priceDisplay.textContent);
                }

                // Analytics Tracking is always entirely free
                if (isAnalyticsTracking && analyticsIsFree && priceDisplay) {
                    priceDisplay.textContent = 'Free';
                    priceDisplay.classList.add('free-item');
                    return; // Don't add to total
                }

                // Check if this $99 product can use free slots
                let freeUnits = 0;
                let paidUnits = quantity;

                if (monthly === 99 && !isAnalyticsTracking && free99Used < free99Count) {
                    // How many free slots can this item use?
                    const availableFreeSlots = free99Count - free99Used;
                    freeUnits = Math.min(quantity, availableFreeSlots);
                    paidUnits = quantity - freeUnits;
                    free99Used += freeUnits;
                }

                // Update price display based on free/paid status
                if (priceDisplay) {
                    if (freeUnits > 0 && paidUnits === 0) {
                        // Entirely free
                        priceDisplay.textContent = 'Free';
                        priceDisplay.classList.add('free-item');
                    } else if (freeUnits > 0 && paidUnits > 0) {
                        // Partially free (for quantity items)
                        priceDisplay.textContent = freeUnits + ' Free, ' + paidUnits + ' × $' + monthly + '/mo';
                        priceDisplay.classList.add('free-item');
                    } else {
                        // Reset to original price
                        priceDisplay.textContent = item.getAttribute('data-original-price') || '($' + monthly + '/mo)';
                        priceDisplay.classList.remove('free-item');
                    }
                }

                // Calculate totals based on paid units only
                const pricingSelector = item.querySelector('.pricing-selector');
                if (pricingSelector) {
                    const selectedOption = pricingSelector.querySelector('input:checked');
                    if (selectedOption && selectedOption.value === 'onetime') {
                        totalOnetime += onetime * paidUnits;
                    } else {
                        totalMonthly += monthly * paidUnits;
                    }
                } else {
                    totalMonthly += monthly * paidUnits;
                    totalOnetime += onetime * paidUnits;
                }
            });

            // Update display
            const monthlyRow = tierElement.querySelector('.monthly-row .price-amount');
            const onetimeRow = tierElement.querySelector('.onetime-row .price-amount');
            const totalText = tierElement.querySelector('.total-text');

            monthlyRow.textContent = '$' + totalMonthly.toLocaleString();
            onetimeRow.textContent = '$' + totalOnetime.toLocaleString();

            // Check for discount - use BASE total for tier calculation (before free rewards applied)
            const discountRowEl = tierElement.querySelector('.discount-row');
            const discountText = tierElement.querySelector('.discount-text');
            const currentTier = REWARD_TIERS[rewardTierIndex];
            const hasDiscount = currentTier.discount > 0 && totalMonthly > 0;

            // Dynamic total line - show discounted amount with percentage if applicable
            if (totalMonthly === 0 && totalOnetime === 0) {
                totalText.textContent = '$0/mo Total';
            } else if (hasDiscount) {
                const discountedTotal = totalMonthly * (1 - currentTier.discount / 100);
                if (totalOnetime === 0) {
                    totalText.textContent = '$' + discountedTotal.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}) + '/mo Total (' + currentTier.discount + '% off)';
                } else {
                    totalText.textContent = '$' + totalOnetime.toLocaleString() + ' today then $' + discountedTotal.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}) + '/mo (' + currentTier.discount + '% off)';
                }
            } else if (totalOnetime === 0) {
                totalText.textContent = '$' + totalMonthly.toLocaleString() + '/mo Total';
            } else {
                totalText.textContent = '$' + totalOnetime.toLocaleString() + ' today then $' + totalMonthly.toLocaleString() + '/mo';
            }

            // Hide onetime row if no onetime fees
            const onetimeRowEl = tierElement.querySelector('.onetime-row');
            if (totalOnetime === 0) {
                onetimeRowEl.style.display = 'none';
            } else {
                onetimeRowEl.style.display = '';
            }

            // Show coupon code on separate line if discount applies
            if (hasDiscount) {
                discountText.textContent = 'Use code ' + currentTier.coupon + ' at checkout';
                discountRowEl.style.display = '';
            } else {
                discountRowEl.style.display = 'none';
            }

            // Check what's in the cart for claim hints
            const hasAnalyticsInCart = Array.from(items).some(item => {
                const title = item.querySelector('.service-item-title')?.textContent || '';
                return title.includes('Analytics Tracking');
            });

            // Check if the free $99 slot is being used (free99Used is calculated above during item processing)
            const isFree99SlotUsed = free99Used > 0;

            // Build claim hints - use BASE total for tier calculation
            const claimHintsEl = tierElement.querySelector('.claim-hints');
            const hasFree99Reward = rewardTierIndex >= 2;
            let claimHintsHtml = '';

            if (!hasAnalyticsInCart) {
                claimHintsHtml += '<div class="claim-hint-item">Add Analytics Tracking for Free!</div>';
            }
            if (hasFree99Reward && !isFree99SlotUsed) {
                claimHintsHtml += '<div class="claim-hint-item">Add a $99 product to claim your free reward!</div>';
            }
            claimHintsEl.innerHTML = claimHintsHtml;

            // Update Growth Rewards - use BASE total for tier calculation
            updateGrowthRewards(tier, baseTotalMonthly, isFree99SlotUsed);
        }

        // Basic Drag and Drop
        const serviceItems = document.querySelectorAll('.service-item');
        const dropzones = document.querySelectorAll('.tier-dropzone');

        serviceItems.forEach(item => {
            item.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', item.outerHTML);
                item.classList.add('dragging');
            });

            item.addEventListener('dragend', () => {
                item.classList.remove('dragging');
            });
        });

        dropzones.forEach(zone => {
            zone.addEventListener('dragover', (e) => {
                e.preventDefault();
                zone.classList.add('drag-over');
            });

            zone.addEventListener('dragleave', () => {
                zone.classList.remove('drag-over');
            });

            zone.addEventListener('drop', (e) => {
                e.preventDefault();
                zone.classList.remove('drag-over');
                const html = e.dataTransfer.getData('text/plain');
                const placeholder = zone.querySelector('.dropzone-placeholder');
                if (placeholder) {
                    placeholder.remove();
                }
                const wrapper = document.createElement('div');
                wrapper.innerHTML = html;
                const droppedItem = wrapper.firstChild;
                droppedItem.classList.add('dropped');
                droppedItem.removeAttribute('draggable');

                const tier = zone.getAttribute('data-tier');

                // Get pricing data
                const monthly = parseInt(droppedItem.getAttribute('data-monthly')) || 0;
                const onetime = parseInt(droppedItem.getAttribute('data-onetime')) || 0;
                const hasBothPricing = monthly > 0 && onetime > 0;

                // Add pricing selector if item has both monthly and onetime pricing
                if (hasBothPricing) {
                    const uniqueId = 'pricing-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
                    const pricingSelector = document.createElement('div');
                    pricingSelector.className = 'pricing-selector';
                    pricingSelector.innerHTML = `
                        <label class="pricing-option">
                            <input type="radio" name="${uniqueId}" value="monthly" checked>
                            <span>$${monthly}/mo</span>
                        </label>
                        <label class="pricing-option">
                            <input type="radio" name="${uniqueId}" value="onetime">
                            <span>$${onetime.toLocaleString()} onetime</span>
                        </label>
                    `;
                    droppedItem.appendChild(pricingSelector);

                    // Update pricing when selection changes
                    pricingSelector.querySelectorAll('input').forEach(radio => {
                        radio.addEventListener('change', () => updateTierPricing(tier));
                    });
                }

                // Add quantity selector if item supports it
                const hasQuantity = droppedItem.getAttribute('data-has-quantity') === 'true';
                if (hasQuantity) {
                    droppedItem.setAttribute('data-quantity', '1');
                    const quantitySelector = document.createElement('div');
                    quantitySelector.className = 'quantity-selector';
                    quantitySelector.innerHTML = `
                        <button type="button" class="qty-btn qty-minus">−</button>
                        <span class="qty-value">1</span>
                        <button type="button" class="qty-btn qty-plus">+</button>
                    `;
                    droppedItem.appendChild(quantitySelector);

                    const qtyValue = quantitySelector.querySelector('.qty-value');
                    const minusBtn = quantitySelector.querySelector('.qty-minus');
                    const plusBtn = quantitySelector.querySelector('.qty-plus');

                    minusBtn.addEventListener('click', () => {
                        let qty = parseInt(droppedItem.getAttribute('data-quantity')) || 1;
                        if (qty > 1) {
                            qty--;
                            droppedItem.setAttribute('data-quantity', qty);
                            qtyValue.textContent = qty;
                            updateTierPricing(tier);
                        }
                    });

                    plusBtn.addEventListener('click', () => {
                        let qty = parseInt(droppedItem.getAttribute('data-quantity')) || 1;
                        qty++;
                        droppedItem.setAttribute('data-quantity', qty);
                        qtyValue.textContent = qty;
                        updateTierPricing(tier);
                    });
                }

                // Add remove button
                const removeBtn = document.createElement('button');
                removeBtn.className = 'remove-service-btn';
                removeBtn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>';

                removeBtn.onclick = () => {
                    droppedItem.remove();
                    if (zone.children.length === 0) {
                        zone.innerHTML = '<div class="dropzone-placeholder"><span>Drag drop service here</span></div>';
                    }
                    updateTierPricing(tier);
                };
                droppedItem.appendChild(removeBtn);

                zone.appendChild(droppedItem);
                updateTierPricing(tier);
            });
        });

        // Initialize all tier pricing displays
        ['good', 'better', 'best'].forEach(tier => updateTierPricing(tier));

        // Service Info Modal
        const serviceDetailContent = {
            'business-branding-foundation': `
                <div class="service-detail">
                    <div class="service-detail-header">
                        <h2 class="service-detail-title">Business Branding Foundation</h2>
                        <p class="service-detail-tagline">Build the brand identity that makes customers choose you.</p>
                    </div>

                    <div class="service-detail-intro">
                        <p>Your business needs more than a logo—it needs a clear, compelling identity that sticks in customers' minds. But too many small businesses operate with generic visuals, inconsistent messaging, and no real understanding of what makes them different.</p>

                        <div class="service-callout">
                            <span class="service-callout-label">Why you need this:</span>
                            <span class="service-callout-text">Customers can't choose you if they can't remember you—or if they don't understand why you're different from everyone else. A scattered brand sends mixed signals and undermines trust before you even get a chance to compete.</span>
                        </div>

                        <p><span class="service-callout-label">In simple terms:</span> We give your business the strategic foundation that makes customers remember you, trust you, and choose you over the competition.</p>

                        <p class="service-detail-summary">Here's what you'll receive—four comprehensive deliverables that form your complete brand foundation:</p>
                    </div>

                    <!-- Deliverable 1 -->
                    <div class="deliverable-card">
                        <div class="deliverable-header">
                            <span class="deliverable-number">01</span>
                            <h3 class="deliverable-title">Strategic Positioning & Brand Framework</h3>
                        </div>
                        <div class="deliverable-body">
                            <p class="deliverable-description">We define what makes your business different and build the foundational identity that everything else grows from. This document establishes the mental territory you own in your market—the concept that makes competitors irrelevant.</p>
                            <p class="deliverable-section-label">What's Included</p>
                            <div class="feature-grid">
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Brand Positioning Statement</h4>
                                    <p class="feature-card-desc">The strategic concept you own in customers' minds that competitors can't copy</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Core Positioning Concept</h4>
                                    <p class="feature-card-desc">Your unique mental territory—the noun you own, not just the verbs you do</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Four Levels of Positioning</h4>
                                    <p class="feature-card-desc">Saying it, proving it, being it, and owning it—a complete strategic framework</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Brand Story Framework</h4>
                                    <p class="feature-card-desc">The problem, insight, solution, proof, and difference that tells your story</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Implementation Roadmap</h4>
                                    <p class="feature-card-desc">Phased action plan with success metrics to bring your positioning to life</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Deliverable 2 -->
                    <div class="deliverable-card">
                        <div class="deliverable-header">
                            <span class="deliverable-number">02</span>
                            <h3 class="deliverable-title">Brand Messaging & Go-To-Market Playbook</h3>
                        </div>
                        <div class="deliverable-body">
                            <p class="deliverable-description">Clear, compelling language that speaks directly to your ideal customers and guides how you show up in the market. Every word, every message, every conversation reinforces your strategic positioning.</p>
                            <p class="deliverable-section-label">What's Included</p>
                            <div class="feature-grid">
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Target Customer Personas</h4>
                                    <p class="feature-card-desc">Deep profiles of your ideal customers—their pain points, motivations, and decision criteria</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Key Messaging Pillars</h4>
                                    <p class="feature-card-desc">Core messages with supporting points and proof points for each pillar</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Tagline Options</h4>
                                    <p class="feature-card-desc">Multiple professionally crafted taglines with strategic rationale for each</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Brand Voice & Tone Guidelines</h4>
                                    <p class="feature-card-desc">How your brand sounds across every scenario—with specific examples</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Sales Scripts & Frameworks</h4>
                                    <p class="feature-card-desc">Ready-to-use conversation frameworks for common sales scenarios and objections</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Competitive Objection Handling</h4>
                                    <p class="feature-card-desc">Word-for-word responses to competitive objections that reinforce your positioning</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Deliverable 3 -->
                    <div class="deliverable-card">
                        <div class="deliverable-header">
                            <span class="deliverable-number">03</span>
                            <h3 class="deliverable-title">Competitive Comparison Analysis</h3>
                        </div>
                        <div class="deliverable-body">
                            <p class="deliverable-description">A clear-eyed look at your competition so you know exactly where you stand and how to cultivate your advantage. We analyze your competitive landscape and show you how to position against—or alongside—other players.</p>
                            <p class="deliverable-section-label">What's Included</p>
                            <div class="feature-grid">
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Competitive Landscape Analysis</h4>
                                    <p class="feature-card-desc">Who your actual competitors are and which market segments they occupy</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Detailed Comparison Tables</h4>
                                    <p class="feature-card-desc">Side-by-side comparison of business models, services, and positioning</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Your Unique Advantages</h4>
                                    <p class="feature-card-desc">What you have that competitors don't—framed as proof of your positioning</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Differentiation Messages</h4>
                                    <p class="feature-card-desc">Ready-to-use language for when prospects compare you to competitors</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Strategic Opportunities</h4>
                                    <p class="feature-card-desc">Partnership or positioning opportunities based on competitive gaps</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bonus: Brand Colors -->
                    <div class="deliverable-card bonus">
                        <div class="deliverable-header">
                            <span class="deliverable-number">+</span>
                            <h3 class="deliverable-title">Brand Color Guidelines <span class="deliverable-bonus-tag">(Bonus)</span></h3>
                        </div>
                        <div class="deliverable-body">
                            <p class="deliverable-description">A complete color system that conveys the right emotions and maintains consistency across all touchpoints—from your website to your business cards. <strong>Pairs perfectly with any of our website packages</strong> (WordPress or AI-powered sites), giving your developer exact specifications to bring your brand to life online.</p>
                            <p class="deliverable-section-label">What's Included</p>
                            <div class="feature-grid">
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Primary & Secondary Palettes</h4>
                                    <p class="feature-card-desc">Core colors with variations for different applications</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">CTA & Button Colors</h4>
                                    <p class="feature-card-desc">Action-driving colors with hover and active states</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Text & Background Colors</h4>
                                    <p class="feature-card-desc">Accessible color combinations for all content types</p>
                                </div>
                                <div class="feature-card">
                                    <h4 class="feature-card-title">Component Color Applications</h4>
                                    <p class="feature-card-desc">Specific guidance for headers, cards, forms, and more</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Summary CTA -->
                    <div class="service-detail-cta">
                        <h3 class="service-detail-cta-title">The Complete Brand Foundation</h3>
                        <p class="service-detail-cta-text">Everything you need to build a brand that customers remember, trust, and choose—delivered as polished, professional documents ready to guide your marketing for years to come.</p>
                    </div>
                </div>
            `,

            'ai-visibility-foundation': `
                <div class="service-detail">
                    <div class="service-detail-header">
                        <h2 class="service-detail-title">AI Visibility Foundation</h2>
                        <p class="service-detail-tagline">Build the root system AI platforms need to find and recommend you.</p>
                    </div>

                    <!-- Full-width Image -->
                    <div class="service-detail-image">
                        <img src="https://pyrusdev.wpenginepowered.com/wp-content/uploads/2025/12/AI-Visibility-Essentials-.png" alt="AI Visibility Foundation - Build your AI presence">
                    </div>

                    <div class="service-detail-intro">
                        <p>The way customers find businesses is changing. Instead of scrolling through search results, more people are asking AI assistants like ChatGPT, Google AI Overviews, and Siri for direct recommendations. If your website isn't set up to communicate with these tools, you're invisible to a growing segment of your market.</p>

                        <div class="service-callout">
                            <span class="service-callout-label">Why you need this:</span>
                            <span class="service-callout-text">AI assistants need specific signals to understand and recommend your business. Without the right technical groundwork, these tools either skip over you or misrepresent what you do. This service builds your complete AI-friendly foundation—a one-time implementation that prepares every page of your site to be discovered.</span>
                        </div>

                        <p><span class="service-callout-label">In simple terms:</span> We dig the irrigation channels and plant the root system so AI tools can find you across your entire site.</p>

                        <p class="service-detail-summary">Here's what's included in your AI Visibility Foundation:</p>
                    </div>

                    <!-- 3-Column Grid -->
                    <div class="deliverable-grid">
                        <div class="deliverable-grid-card">
                            <div class="deliverable-grid-header">
                                <h3 class="deliverable-grid-title">Complete Site Audit</h3>
                            </div>
                            <div class="deliverable-grid-body">
                                <p>We analyze every page of your site to identify what AI platforms can and can't see—mapping exactly what needs to be optimized for AI discovery.</p>
                            </div>
                        </div>

                        <div class="deliverable-grid-card">
                            <div class="deliverable-grid-header">
                                <h3 class="deliverable-grid-title">AI Instruction File</h3>
                            </div>
                            <div class="deliverable-grid-body">
                                <p>We create a dedicated file that tells AI crawlers exactly what your business offers and how to describe you—ensuring AI assistants represent you accurately when customers ask.</p>
                            </div>
                        </div>

                        <div class="deliverable-grid-card">
                            <div class="deliverable-grid-header">
                                <h3 class="deliverable-grid-title">Full Structured Data Implementation</h3>
                            </div>
                            <div class="deliverable-grid-body">
                                <p>We implement the technical markup across all your service pages, location info, and reputation signals—giving AI platforms the structured data they need to understand and recommend your complete offerings.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Summary CTA -->
                    <div class="service-detail-cta">
                        <h3 class="service-detail-cta-title">Your Foundation, Fully Planted</h3>
                        <p class="service-detail-cta-text">This is project work with a clear finish line. Once complete, your entire site—whether that's 10 pages or 50—will be optimized for AI discovery. You'll have the technical infrastructure that positions you to be recommended when customers ask AI assistants about businesses like yours.</p>

                        <!-- Monitoring Upsell -->
                        <div class="service-upsell-box">
                            <p class="service-upsell-box-title">Want to track how it's working?</p>
                            <p class="service-upsell-box-text">Once your foundation is in place, our <strong>AI Visibility Monitoring</strong> service ($149/month) tracks your AI citation performance, adjusts as platforms evolve, and provides monthly reporting on how you're showing up in AI recommendations.</p>
                        </div>
                    </div>
                </div>
            `
        };

        function openServiceModal(serviceItem) {
            const title = serviceItem.querySelector('.service-item-title').textContent;
            const description = serviceItem.querySelector('.service-item-desc').textContent;
            const monthly = parseInt(serviceItem.getAttribute('data-monthly')) || 0;
            const onetime = parseInt(serviceItem.getAttribute('data-onetime')) || 0;
            const features = serviceItem.getAttribute('data-features') || '';
            const detailContent = serviceItem.getAttribute('data-detail-content');

            const modal = document.getElementById('serviceModal');
            const modalBody = document.getElementById('serviceModalBody');
            const modalTitle = document.getElementById('serviceModalTitle');

            // Check if this service has detailed content
            if (detailContent && serviceDetailContent[detailContent]) {
                // Use detailed content - wider modal, hide header
                modal.classList.add('modal-xl');
                modalTitle.style.display = 'none';
                modalBody.innerHTML = serviceDetailContent[detailContent];
            } else {
                // Use simple content
                modal.classList.remove('modal-xl');
                modalTitle.style.display = '';
                modalTitle.textContent = title;

                // Build simple modal content
                let bodyHtml = '';

                // Pricing display
                if (monthly > 0 && onetime > 0) {
                    bodyHtml += `
                        <div class="service-modal-pricing">
                            <div class="service-modal-price monthly">
                                <span class="price-value">$${monthly}</span>
                                <span class="price-period">/month</span>
                            </div>
                            <span class="price-divider">or</span>
                            <div class="service-modal-price onetime">
                                <span class="price-value">$${onetime.toLocaleString()}</span>
                                <span class="price-period">one-time</span>
                            </div>
                        </div>
                    `;
                } else if (monthly > 0) {
                    bodyHtml += `
                        <div class="service-modal-pricing">
                            <div class="service-modal-price monthly">
                                <span class="price-value">$${monthly}</span>
                                <span class="price-period">/month</span>
                            </div>
                        </div>
                    `;
                } else if (onetime > 0) {
                    bodyHtml += `
                        <div class="service-modal-pricing">
                            <div class="service-modal-price onetime">
                                <span class="price-value">$${onetime.toLocaleString()}</span>
                                <span class="price-period">one-time</span>
                            </div>
                        </div>
                    `;
                }

                // Description
                bodyHtml += `<div class="service-modal-description"><p>${description}</p></div>`;

                // Features if available
                if (features) {
                    const featureList = features.split('|').map(f => `<li>${f}</li>`).join('');
                    bodyHtml += `<div class="service-modal-features"><h4>What's Included:</h4><ul>${featureList}</ul></div>`;
                }

                modalBody.innerHTML = bodyHtml;
            }

            document.getElementById('serviceInfoModal').classList.add('active');
        }

        function closeServiceModal() {
            document.getElementById('serviceInfoModal').classList.remove('active');
            // Reset modal state
            const modal = document.getElementById('serviceModal');
            modal.classList.remove('modal-xl');
            document.getElementById('serviceModalTitle').style.display = '';
        }

        // Attach click handlers to all info buttons
        document.querySelectorAll('.info-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const serviceItem = btn.closest('.service-item');
                openServiceModal(serviceItem);
            });
        });

        // Close modal on overlay click
        document.getElementById('serviceInfoModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                closeServiceModal();
            }
        });
    </script>
