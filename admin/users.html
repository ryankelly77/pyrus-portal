<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pyrus Admin - Users</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../components/modals/modal.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Admin Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <img src="../images/pyrus-logo-icon.png" alt="Pyrus" width="28" height="28" style="filter: brightness(0) invert(1);">
                <span>Pyrus Admin</span>
            </div>
            <nav class="admin-nav">
                <a href="recommendations.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                        <polyline points="2 17 12 22 22 17"></polyline>
                        <polyline points="2 12 12 17 22 12"></polyline>
                    </svg>
                    <span>Recommendations</span>
                </a>
                <a href="index.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>Clients</span>
                </a>
                <a href="content.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    <span>Content</span>
                </a>
                <a href="users.html" class="admin-nav-item active">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span>Users</span>
                </a>
                <a href="revenue.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"></line>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                    </svg>
                    <span>Revenue / MRR</span>
                </a>
                <a href="notifications.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span>Notifications</span>
                </a>
                <a href="settings.html" class="admin-nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                    <span>Settings</span>
                </a>
                <div class="nav-spacer"></div>
                <a href="../client/login.html" class="admin-nav-item nav-logout" onclick="sessionStorage.clear();">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    <span>Logout</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Top Header Bar -->
            <div class="admin-top-header">
                <div class="admin-top-header-left">
                    <h1>Users</h1>
                </div>
                <div class="admin-top-header-right">
                    <a href="notifications.html" class="btn-icon has-notification">
                        <span class="notification-badge"></span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </a>
                    <a href="settings.html" class="user-menu-link">
                        <div class="user-avatar-small">
                            <span>RK</span>
                        </div>
                        <span class="user-name">Ryan Kelly</span>
                    </a>
                </div>
            </div>

            <div class="admin-content">
                <!-- Page Header -->
                <div class="page-header">
                    <div class="page-header-content">
                        <p>Manage portal users and their access</p>
                    </div>
                    <button class="btn btn-primary" onclick="openInviteModal()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Invite User
                    </button>
                </div>

                <!-- Filters -->
                <div class="users-filters">
                    <div class="search-box">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        <input type="text" placeholder="Search users..." class="search-input" id="userSearch">
                    </div>
                    <div class="filter-tabs">
                        <button class="filter-tab active" data-filter="all">All Users</button>
                        <button class="filter-tab" data-filter="registered">Registered</button>
                        <button class="filter-tab" data-filter="invited">Invited</button>
                    </div>
                    <select class="filter-select" id="clientFilter">
                        <option value="all">All Clients</option>
                        <option value="TC Clinical Services">TC Clinical Services</option>
                        <option value="Raptor Vending">Raptor Vending</option>
                        <option value="Raptor Services">Raptor Services</option>
                        <option value="Espronceda Law">Espronceda Law</option>
                        <option value="Summit Dental">Summit Dental</option>
                        <option value="Coastal Properties">Coastal Properties</option>
                    </select>
                </div>

                <!-- Admin Users Section -->
                <div class="admin-users-section">
                    <h3>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        </svg>
                        Admin Users
                    </h3>
                    <div class="users-table-container">
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Role</th>
                                    <th>Email</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr data-status="registered" data-is-admin="true">
                                    <td class="user-name">
                                        <div class="user-avatar" style="background: linear-gradient(135deg, var(--pyrus-green) 0%, var(--pyrus-green-light) 100%);">RK</div>
                                        <span>Ryan Kelly</span>
                                    </td>
                                    <td>
                                        <span class="role-badge super-admin">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                                            </svg>
                                            Super Admin
                                        </span>
                                    </td>
                                    <td>ryan@pyrusdigital.com</td>
                                    <td><span class="status-badge status-registered">Active</span></td>
                                    <td>
                                        <span class="text-muted" style="font-size: 12px;">Owner</span>
                                    </td>
                                </tr>
                                <tr data-status="registered" data-is-admin="true">
                                    <td class="user-name">
                                        <div class="user-avatar" style="background: #3B82F6;">SM</div>
                                        <span>Sarah Mitchell</span>
                                    </td>
                                    <td>
                                        <span class="role-badge production-team">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                                            </svg>
                                            Production Team
                                        </span>
                                    </td>
                                    <td>sarah@pyrusdigital.com</td>
                                    <td><span class="status-badge status-registered">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-outline" onclick="editAdminUser('sarah')">Edit</button>
                                    </td>
                                </tr>
                                <tr data-status="invited" data-is-admin="true">
                                    <td class="user-name">
                                        <div class="user-avatar" style="background: #6B7280;">JD</div>
                                        <span>James Davis</span>
                                    </td>
                                    <td>
                                        <span class="role-badge production-team">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                                            </svg>
                                            Production Team
                                        </span>
                                    </td>
                                    <td>james@pyrusdigital.com</td>
                                    <td><span class="status-badge status-invited">Invited</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-outline" onclick="resendAdminInvite('james')">Resend</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <button class="btn btn-secondary" onclick="openInviteAdminModal()" style="margin-top: 16px;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Invite Admin User
                    </button>
                </div>

                <!-- Client Users Section -->
                <div class="client-users-section">
                    <h3>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        Client Users
                    </h3>
                    <div class="users-table-container">
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Client</th>
                                    <th>Phone</th>
                                    <th>Email</th>
                                    <th>Status</th>
                                    <th>Recommendation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr data-status="registered" data-client="TC Clinical Services" data-is-client="true">
                                <td class="user-name">
                                    <div class="user-avatar" style="background: linear-gradient(135deg, #B57841 0%, #C4895A 100%);">TC</div>
                                    <span>Jon De La Garza</span>
                                </td>
                                <td>TC Clinical Services</td>
                                <td>(555) 123-4567</td>
                                <td>dlg.mdservices@gmail.com</td>
                                <td><span class="status-badge status-registered">Registered</span></td>
                                <td>
                                    <a href="smart-recommendation.html" class="recommendation-link">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                                        </svg>
                                        Smart Recommendation
                                    </a>
                                </td>
                            </tr>
                            <tr data-status="registered" data-client="Raptor Vending" data-is-client="true">
                                <td class="user-name">
                                    <div class="user-avatar" style="background: #2563EB;">MJ</div>
                                    <span>Mike Johnson</span>
                                </td>
                                <td>Raptor Vending</td>
                                <td>(555) 234-5678</td>
                                <td>mike@raptorvending.com</td>
                                <td><span class="status-badge status-registered">Registered</span></td>
                                <td>
                                    <a href="smart-recommendation.html" class="recommendation-link">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                                        </svg>
                                        Smart Recommendation
                                    </a>
                                </td>
                            </tr>
                            <tr data-status="registered" data-client="Raptor Services" data-is-client="true">
                                <td class="user-name">
                                    <div class="user-avatar" style="background: #7C3AED;">SM</div>
                                    <span>Sarah Martinez</span>
                                </td>
                                <td>Raptor Services</td>
                                <td>(555) 345-6789</td>
                                <td>sarah@raptorservices.com</td>
                                <td><span class="status-badge status-registered">Registered</span></td>
                                <td>
                                    <a href="smart-recommendation.html" class="recommendation-link">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                                        </svg>
                                        Smart Recommendation
                                    </a>
                                </td>
                            </tr>
                            <tr data-status="registered" data-client="Espronceda Law" data-is-client="true">
                                <td class="user-name">
                                    <div class="user-avatar" style="background: #DC2626;">ME</div>
                                    <span>Maria Espronceda</span>
                                </td>
                                <td>Espronceda Law</td>
                                <td>(555) 456-7890</td>
                                <td>maria@espronceda.law</td>
                                <td><span class="status-badge status-registered">Registered</span></td>
                                <td>
                                    <a href="smart-recommendation.html" class="recommendation-link">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                                        </svg>
                                        Smart Recommendation
                                    </a>
                                </td>
                            </tr>
                            <tr data-status="invited" data-client="Summit Dental" data-is-client="false">
                                <td class="user-name">
                                    <div class="user-avatar" style="background: #3B82F6;">JW</div>
                                    <span>James Wilson</span>
                                </td>
                                <td>Summit Dental</td>
                                <td>(555) 567-8901</td>
                                <td>james@summitdental.com</td>
                                <td><span class="status-badge status-invited">Invited</span></td>
                                <td>
                                    <a href="recommendation.html" class="recommendation-link original">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                            <line x1="16" y1="13" x2="8" y2="13"></line>
                                            <line x1="16" y1="17" x2="8" y2="17"></line>
                                        </svg>
                                        Original Plan
                                    </a>
                                </td>
                            </tr>
                            <tr data-status="invited" data-client="Coastal Properties" data-is-client="false">
                                <td class="user-name">
                                    <div class="user-avatar" style="background: #059669;">LB</div>
                                    <span>Lisa Brown</span>
                                </td>
                                <td>Coastal Properties</td>
                                <td>(555) 678-9012</td>
                                <td>lisa@coastalproperties.com</td>
                                <td><span class="status-badge status-invited">Invited</span></td>
                                <td>
                                    <a href="recommendation.html" class="recommendation-link original">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                            <line x1="16" y1="13" x2="8" y2="13"></line>
                                            <line x1="16" y1="17" x2="8" y2="17"></line>
                                        </svg>
                                        Original Plan
                                    </a>
                                </td>
                            </tr>
                            <tr data-status="registered" data-client="Summit Dental" data-is-client="true">
                                <td class="user-name">
                                    <div class="user-avatar" style="background: #3B82F6;">RD</div>
                                    <span>Rachel Davis</span>
                                </td>
                                <td>Summit Dental</td>
                                <td>(555) 789-0123</td>
                                <td>rachel@summitdental.com</td>
                                <td><span class="status-badge status-registered">Registered</span></td>
                                <td>
                                    <a href="smart-recommendation.html" class="recommendation-link">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                                        </svg>
                                        Smart Recommendation
                                    </a>
                                </td>
                            </tr>
                            <tr data-status="invited" data-client="TC Clinical Services" data-is-client="false">
                                <td class="user-name">
                                    <div class="user-avatar" style="background: linear-gradient(135deg, #B57841 0%, #C4895A 100%);">KT</div>
                                    <span>Kevin Thompson</span>
                                </td>
                                <td>TC Clinical Services</td>
                                <td>(555) 890-1234</td>
                                <td>kevin@tc-clinicalservices.com</td>
                                <td><span class="status-badge status-invited">Invited</span></td>
                                <td>
                                    <a href="recommendation.html" class="recommendation-link original">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                            <line x1="16" y1="13" x2="8" y2="13"></line>
                                            <line x1="16" y1="17" x2="8" y2="17"></line>
                                        </svg>
                                        Original Plan
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="table-pagination">
                    <span class="pagination-info">Showing 1-8 of 8 users</span>
                    <div class="pagination-controls">
                        <button class="pagination-btn" disabled>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="pagination-btn active">1</button>
                        <button class="pagination-btn" disabled>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Invite User Modal -->
    <div class="modal-overlay" id="inviteUserModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-header-content">
                    <div class="modal-header-icon" style="background: rgba(136, 84, 48, 0.1); color: #885430;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="8.5" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                    </div>
                    <div>
                        <h2 class="modal-title">Invite User</h2>
                        <p class="modal-subtitle">Send a portal invitation to a new user</p>
                    </div>
                </div>
                <button class="modal-close" onclick="closeModal('inviteUserModal')" aria-label="Close modal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form class="modal-form" id="inviteUserForm">
                    <div class="form-group">
                        <label class="form-label">Role <span class="required">*</span></label>
                        <div class="role-select-grid">
                            <label class="role-option selected" data-role="client-user">
                                <input type="radio" name="inviteRoleType" value="client-user" checked onchange="handleRoleChange(this.value)">
                                <div class="role-option-icon" style="background: var(--pyrus-green-wash); color: var(--pyrus-green);">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                </div>
                                <div class="role-option-content">
                                    <span class="role-option-title">Client User</span>
                                    <span class="role-option-desc">Portal access for a client</span>
                                </div>
                            </label>
                            <label class="role-option" data-role="super-admin">
                                <input type="radio" name="inviteRoleType" value="super-admin" onchange="handleRoleChange(this.value)">
                                <div class="role-option-icon" style="background: #FEF3C7; color: #D97706;">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                                    </svg>
                                </div>
                                <div class="role-option-content">
                                    <span class="role-option-title">Super Admin</span>
                                    <span class="role-option-desc">Full access to all features</span>
                                </div>
                            </label>
                            <label class="role-option" data-role="production-team">
                                <input type="radio" name="inviteRoleType" value="production-team" onchange="handleRoleChange(this.value)">
                                <div class="role-option-icon" style="background: #DBEAFE; color: #2563EB;">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                                        <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                                    </svg>
                                </div>
                                <div class="role-option-content">
                                    <span class="role-option-title">Production Team</span>
                                    <span class="role-option-desc">Content & client management</span>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="form-group" id="clientSelectGroup">
                        <label class="form-label">Assign to Client <span class="required">*</span></label>
                        <select class="form-select" id="inviteClient" required>
                            <option value="">Select a client...</option>
                            <option value="TC Clinical Services">TC Clinical Services</option>
                            <option value="Raptor Vending">Raptor Vending</option>
                            <option value="Raptor Services">Raptor Services</option>
                            <option value="Espronceda Law">Espronceda Law</option>
                            <option value="Summit Dental">Summit Dental</option>
                            <option value="Coastal Properties">Coastal Properties</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">First Name <span class="required">*</span></label>
                            <input type="text" class="form-input" id="inviteFirstName" placeholder="John" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Last Name <span class="required">*</span></label>
                            <input type="text" class="form-input" id="inviteLastName" placeholder="Smith" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email Address <span class="required">*</span></label>
                        <input type="email" class="form-input" id="inviteEmail" placeholder="john@company.com" required>
                        <div class="form-hint">An invitation email will be sent to this address</div>
                    </div>
                    <div class="form-group" id="phoneGroup">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-input" id="invitePhone" placeholder="(555) 123-4567">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('inviteUserModal')">Cancel</button>
                <button class="btn btn-primary" onclick="sendInvite()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                    Send Invitation
                </button>
            </div>
        </div>
    </div>

    <script src="../js/scripts.js"></script>
    <script src="../components/modals/modal.js"></script>
    <script>
        // Override openInviteModal to use new system
        function openInviteModal() {
            openModal('inviteUserModal');
            // Reset to client-user role
            handleRoleChange('client-user');
            document.querySelector('input[value="client-user"]').checked = true;
        }

        // Handle role selection change
        function handleRoleChange(role) {
            const clientGroup = document.getElementById('clientSelectGroup');
            const clientSelect = document.getElementById('inviteClient');
            const phoneGroup = document.getElementById('phoneGroup');

            // Update selected state on role options
            document.querySelectorAll('.role-option').forEach(opt => {
                opt.classList.remove('selected');
                if (opt.dataset.role === role) {
                    opt.classList.add('selected');
                }
            });

            // Show/hide client selection based on role
            if (role === 'client-user') {
                clientGroup.style.display = 'block';
                clientSelect.required = true;
                phoneGroup.style.display = 'block';
            } else {
                // Admin roles don't need client assignment
                clientGroup.style.display = 'none';
                clientSelect.required = false;
                clientSelect.value = '';
                phoneGroup.style.display = 'block';
            }
        }

        function sendInvite() {
            const form = document.getElementById('inviteUserForm');
            if (form.checkValidity()) {
                // In a real app, this would send the invitation
                alert('Invitation sent successfully!');
                closeModal('inviteUserModal');
                form.reset();
            } else {
                form.reportValidity();
            }
        }

        // User Filters
        const filterTabs = document.querySelectorAll('.users-filters .filter-tab');
        const clientFilter = document.getElementById('clientFilter');
        const searchInput = document.getElementById('userSearch');
        const userRows = document.querySelectorAll('.users-table tbody tr');

        function filterUsers() {
            const activeTab = document.querySelector('.users-filters .filter-tab.active');
            const statusFilter = activeTab ? activeTab.getAttribute('data-filter') : 'all';
            const clientValue = clientFilter.value;
            const searchValue = searchInput.value.toLowerCase();

            let visibleCount = 0;

            userRows.forEach(row => {
                const rowStatus = row.getAttribute('data-status');
                const rowClient = row.getAttribute('data-client');
                const rowName = row.querySelector('.user-name span').textContent.toLowerCase();
                const rowEmail = row.querySelector('td:nth-child(4)').textContent.toLowerCase();
                const rowPhone = row.querySelector('td:nth-child(3)').textContent.toLowerCase();

                const matchesStatus = statusFilter === 'all' || rowStatus === statusFilter;
                const matchesClient = clientValue === 'all' || rowClient === clientValue;
                const matchesSearch = searchValue === '' ||
                    rowName.includes(searchValue) ||
                    rowEmail.includes(searchValue) ||
                    rowPhone.includes(searchValue) ||
                    rowClient.toLowerCase().includes(searchValue);

                if (matchesStatus && matchesClient && matchesSearch) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            // Update pagination info
            const paginationInfo = document.querySelector('.pagination-info');
            const total = userRows.length;
            paginationInfo.textContent = `Showing 1-${visibleCount} of ${visibleCount} users`;
        }

        filterTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                filterTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                filterUsers();
            });
        });

        clientFilter.addEventListener('change', filterUsers);
        searchInput.addEventListener('input', filterUsers);
    </script>
    <script
        src="https://widgets.leadconnectorhq.com/loader.js"
        data-resources-url="https://widgets.leadconnectorhq.com/chat-widget/loader.js"
        data-widget-id="6879429b33ee4b1983428d6c">
    </script>
</body>
</html>
